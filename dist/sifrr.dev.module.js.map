{"version":3,"file":"sifrr.dev.module.js","sources":["../src/eslintrc.js","../src/loaddir.js","../src/deepmerge.js","../src/getrollupconfig.js","../src/generatechangelog.js","../src/exec.js","../src/checktag.js","../src/releasetag.js","../src/gitaddcommitpush.js","../src/test/server.js","../src/test/testglobals.js","../node_modules/mkdirp/index.js","../src/test/writecoverage.js","../src/test/run.js","../src/sifrr.dev.js"],"sourcesContent":["module.exports = {\n  env: {\n    browser: true,\n    node: true,\n    es6: true,\n    mocha: true\n  },\n  // for tests\n  globals: {\n    ENV: true,\n    chai: false,\n    sinon: false,\n    assert: false,\n    expect: false,\n    should: false,\n    delay: false,\n    port: false,\n    PATH: false,\n    SPATH: false,\n    page: false,\n    browser: false\n  },\n  extends: 'eslint:recommended',\n  parserOptions: {\n    sourceType: 'module',\n    ecmaVersion: 2017,\n    esversion: 2017\n  },\n  rules: {\n    indent: [\n      'error',\n      2\n    ],\n    'linebreak-style': [\n      'error',\n      'unix'\n    ],\n    quotes: [\n      'error',\n      'single',\n      {\n        avoidEscape: true,\n        allowTemplateLiterals: true\n      }\n    ],\n    semi: [\n      'warn',\n      'always'\n    ],\n    'quote-props': [\n      'error',\n      'as-needed'\n    ],\n    'no-var': [\n      'error'\n    ],\n    'max-lines': [\n      'error',\n      220\n    ],\n    'mocha/no-exclusive-tests': 'error'\n  },\n  plugins: [\n    'html',\n    'mocha'\n  ],\n  settings: {\n    'html/indent': '+2'\n  }\n};\n","const fs = require('fs'),\n  path = require('path');\n\nfunction loadDir({\n  dir,\n  onFile = () => {},\n  onDir = () => {},\n  deep = 100\n} = {}) {\n  if (!fs.existsSync(dir) || !fs.statSync(dir).isDirectory()) return false;\n  fs.readdirSync(dir).forEach(file => {\n    const filePath = path.join(dir, file);\n    fs.statSync(filePath).isDirectory()\n      ? (deep > 0 ? (onDir(filePath), loadDir({ dir: filePath, onFile, onDir, deep: deep - 1})) : () => {})\n      : onFile(filePath);\n  });\n  return true;\n}\n\nmodule.exports = loadDir;\n","function type(value) {\n  if (value === null) return 'null';\n  if (typeof value === 'object') {\n    if (Array.isArray(value)) return 'array';\n  }\n  return typeof value;\n}\n\nfunction deepMerge(target, merger, mergeArray = false) {\n  switch (type(target)) {\n  case 'array':\n    return mergeArray ? [...target, ...merger] : [...merger];\n  case 'object':\n    Object.keys(merger).forEach(k => {\n      target[k] = deepMerge(target[k], merger[k], mergeArray);\n    });\n    return target;\n  default:\n    return typeof merger === 'undefined' ? target : merger;\n  }\n}\n\nmodule.exports = deepMerge;\n","const path = require('path');\nconst babel = require('rollup-plugin-babel');\nconst terser = require('rollup-plugin-terser').terser;\nconst resolve = require('rollup-plugin-node-resolve');\nconst commonjs = require('rollup-plugin-commonjs');\nconst cleanup = require('rollup-plugin-cleanup');\n\nconst deepMerge = require('./deepmerge');\n\nfunction moduleConfig({\n  name,\n  inputFile,\n  outputFolder,\n  minify = false,\n  type = 'cjs',\n  outputFileName\n}, extraConfig) {\n  const filename = path.basename(inputFile).slice(0, path.basename(inputFile).lastIndexOf('.')).toLowerCase();\n  const format = type === 'cjs' ? 'cjs' : (type === 'browser' ? 'umd' : 'es');\n  const ret = {\n    input: inputFile,\n    output: {\n      file: path.join(outputFolder, `./${(outputFileName || filename) + (type === 'module' ? '.module' : '') + (minify ? '.min' : '')}.js`),\n      format,\n      name: name,\n      sourcemap: !minify,\n      preferConst: true,\n      exports: 'named'\n    },\n    plugins: [\n      resolve({\n        browser: type === 'browser',\n        mainFields: ['module', 'main']\n      }),\n      commonjs()\n    ]\n  };\n\n  if (type !== 'module') {\n    ret.plugins.push(babel({\n      exclude: 'node_modules/**',\n      rootMode: 'upward'\n    }));\n  }\n\n  ret.plugins.push(cleanup());\n\n  if (minify) {\n    ret.plugins.push(terser({\n      output: {\n        comments: 'all'\n      }\n    }));\n  }\n\n  return deepMerge(ret, extraConfig, true);\n}\n\nmodule.exports = moduleConfig;\n","const fs = require('fs');\nconst path = require('path');\nconst conventionalChangelog = require('conventional-changelog');\nconst rtag = /tag:\\s*[v=]?(.+?)[,)]/gi;\n\nmodule.exports = ({\n  folder = process.cwd(),\n  releaseCount = 0,\n  changelogFile = path.join(folder, './CHANGELOG.md'),\n  outputUnreleased = false,\n  multiRepo = false\n} = {}) => {\n  let oldChangelog = '';\n  const transform = function(cm, cb) {\n    let match = rtag.exec(cm.gitTags);\n    rtag.lastIndex = 0;\n    if (match) cm.version = match[1];\n    cb(null, cm);\n  };\n  const options = {\n    pkg: {\n      path: path.join(folder, './package.json'),\n    },\n    preset: 'angular',\n    releaseCount,\n    outputUnreleased,\n    gitRawCommitsOpts: {\n      path: folder\n    },\n    transform\n  };\n\n  if (fs.existsSync(changelogFile)) {\n    if (releaseCount === 0) fs.writeFileSync(changelogFile, '');\n    oldChangelog = fs.readFileSync(changelogFile, 'utf-8');\n  }\n  if (multiRepo) {\n    options.transform = (cm, cb) => {\n      if (cm.scope && cm.scope === multiRepo) cm.scope = null;\n      else cm.type = 'chore';\n      transform(cm, cb);\n    };\n  }\n  return new Promise((res, rej) => {\n    conventionalChangelog(options)\n      .pipe(fs.createWriteStream(changelogFile))\n      .on('error', rej)\n      .on('finish', () => {\n        fs.appendFileSync(changelogFile, oldChangelog);\n        res(changelogFile);\n      });\n  });\n};\n","const spawn = require('child_process').spawn;\nconst execa = require('child_process').exec;\n\nfunction exec(command, options = {}) {\n  process.stdout.write(`Running command: ${command} \\n`);\n  if (command.indexOf('sh ') === 0) {\n    options.stdio = options.stdio || 'inherit';\n    return new Promise((res, rej) => {\n      const [c, ...args] = command.split(' ');\n      const runner = spawn(c, args, options);\n      runner.on('close', (code) => {\n        if (code !== 0) {\n          process.stdout.write(`Command exited with code ${code}: ${command} \\n`);\n          rej(code);\n        } else {\n          process.stdout.write(`Finished command: ${command} \\n`);\n          res();\n        }\n      });\n    });\n  } else {\n    return new Promise((res, rej) => {\n      execa(command, options, (err, stdout, stderr) => {\n        if (stdout) process.stdout.write(`out: ${stdout} \\n`);\n        if (stderr) process.stderr.write(`err: ${stderr} \\n`);\n        if (err !== null) {\n          process.stderr.write(`exec error: ${err}`);\n          rej(err);\n        }\n        res({ stdout, stderr });\n        process.stdout.write(`Finished command: ${command} \\n`);\n      });\n    });\n  }\n}\n\nmodule.exports =  exec;\n","const exec = require('./exec');\nconst path = require('path');\n\nasync function checkTag(version, prefix = 'v') {\n  version = version || require(path.resolve('./package.json')).version;\n  const tag = prefix + version;\n  await exec('git pull');\n  return exec(`git rev-parse ${tag}`).then(() => {\n    process.stdout.write(`Tag ${tag} already exists.`);\n    return true;\n  }).catch(async () => {\n    return false;\n  });\n}\n\nmodule.exports = checkTag;\n","const exec = require('./exec');\nconst path = require('path');\nconst checkTag = require('./checktag');\n\nasync function releaseTag(version, prefix = 'v') {\n  version = version || require(path.resolve('./package.json')).version;\n  const tag = prefix + version;\n  const exists = await checkTag(version, prefix);\n  if (!exists) {\n    await exec(`git tag -a ${tag} -m \"Release of ${tag}\"`);\n    process.stdout.write('\\n');\n    await exec(`git push origin ${tag}`);\n    return true;\n  } else {\n    return false;\n  }\n}\n\nmodule.exports = releaseTag;\n","const exec = require('./exec');\n\nmodule.exports = async function({\n  preCommand = false,\n  files = '*',\n  commitMsg = 'chore: add new files',\n  push = true\n} = {}) {\n  if (preCommand) {\n    if (Array.isArray(preCommand)) {\n      for (let i = 0; i < preCommand.length; i++) {\n        await exec(preCommand[i]);\n      }\n    } else {\n      await exec(preCommand);\n    }\n  }\n  if (Array.isArray(files)) {\n    for (let i = 0; i < files.length; i++) {\n      await exec(`git ls-files '${files[i]}' | xargs git add`);\n    }\n  } else {\n    await exec(`git ls-files '${files}' | xargs git add`);\n  }\n  await exec(`git commit -m \"${commitMsg}\"`).then(() => {\n    if (push) exec(`git push`);\n  }).catch(() => {\n    process.stdout.write('Nothing to commit, not running git push. \\n');\n  });\n};\n","const path = require('path');\nconst fs = require('fs');\n\nconst loadDir = require('../loaddir');\nconst instrumenter = require('istanbul-lib-instrument').createInstrumenter();\nconst { App, SSLApp } = require('@sifrr/server');\nfunction staticInstrument(app, folder, coverage = false) {\n  loadDir(folder, {\n    onFile: (filePath) => {\n      if (coverage && path.slice(-3) === '.js') {\n        app.get('/' + path.relative(folder, filePath), (res) => {\n          const text = fs.readFileSync(filePath, 'utf-8');\n          if (fs.existsSync(path + '.map')) {\n            res.writeHeader('content-type', 'application/javascript; charset=UTF-8');\n            res.send(instrumenter.instrumentSync(text, path, JSON.parse(fs.readFileSync(path + '.map'))));\n          } else {\n            res.writeHeader('content-type', 'application/javascript; charset=UTF-8');\n            res.send(text);\n          }\n        });\n      } else {\n        app.file('/' + path.relative(folder, filePath), filePath);\n      }\n    }\n  });\n}\n\nmodule.exports = async function(root, {\n  extraStaticFolders = [],\n  setGlobals = true,\n  coverage = true,\n  port = false,\n  securePort = false\n} = {}) {\n  const listeners = [];\n  function startServer(app, hostingPort) {\n    staticInstrument(app, root, coverage);\n    staticInstrument(app, path.join(root, '../../dist'), coverage);\n    extraStaticFolders.forEach(folder => {\n      staticInstrument(app, folder, coverage);\n    });\n\n    listeners.push(() => {\n      app.listen(hostingPort, (socket) => {\n        if (socket) {\n          global.console.log(`Test server listening on port ${hostingPort}, serving ${hostingPort}`);\n        } else {\n          global.console.log('Test server failed to listen to port ' + hostingPort);\n        }\n      });\n    });\n  }\n\n  let normalApp, secureApp;\n\n  if (setGlobals && port) {\n    global.PATH = `http://localhost:${port}`;\n    global.port = port;\n  }\n\n  if (port) {\n    let app;\n    if (fs.existsSync(path.join(root, 'server.js'))) {\n      app = require(path.join(root, 'server.js'));\n    } else {\n      app = new App();\n      startServer(app, port);\n    }\n    normalApp = app;\n  }\n\n  if (setGlobals && securePort) {\n    global.SPATH = `https://localhost:${securePort}`;\n    global.securePort = securePort;\n  }\n\n  if (securePort) {\n    let app;\n    if (fs.existsSync(path.join(root, 'secureserver.js'))) {\n      app = require(path.join(root, 'secureserver.js'));\n    } else {\n      app = new SSLApp({\n        key_file_name: path.join(__dirname, 'keys/server.key'),\n        cert_file_name: path.join(__dirname, 'keys/server.crt')\n      });\n      startServer(app, securePort);\n    }\n    secureApp = app;\n  }\n\n  return {\n    secureApp: secureApp,\n    app: normalApp,\n    listen: () => {\n      listeners.forEach(l => l());\n    },\n    close: () => {\n      secureApp && secureApp.close && secureApp.close();\n      normalApp && normalApp.close && normalApp.close();\n    }\n  };\n};\n","module.exports = () => {\n  global.ENV = process.env.NODE_ENV = process.env.NODE_ENV || 'test';\n  global.Mocha = require('mocha');\n  global.chai = require('chai');\n  global.sinon = global.sinon || require('sinon').createSandbox();\n  global.assert = chai.assert;\n  global.expect = chai.expect;\n  global.should = chai.should();\n  global.delay = (time) => {\n    return new Promise(res => {\n      setTimeout(function(){\n        res();\n      }, time * 1000);\n    });\n  };\n\n  chai.use(require('chai-as-promised'));\n};\n","var path = require('path');\nvar fs = require('fs');\nvar _0777 = parseInt('0777', 8);\n\nmodule.exports = mkdirP.mkdirp = mkdirP.mkdirP = mkdirP;\n\nfunction mkdirP (p, opts, f, made) {\n    if (typeof opts === 'function') {\n        f = opts;\n        opts = {};\n    }\n    else if (!opts || typeof opts !== 'object') {\n        opts = { mode: opts };\n    }\n    \n    var mode = opts.mode;\n    var xfs = opts.fs || fs;\n    \n    if (mode === undefined) {\n        mode = _0777 & (~process.umask());\n    }\n    if (!made) made = null;\n    \n    var cb = f || function () {};\n    p = path.resolve(p);\n    \n    xfs.mkdir(p, mode, function (er) {\n        if (!er) {\n            made = made || p;\n            return cb(null, made);\n        }\n        switch (er.code) {\n            case 'ENOENT':\n                mkdirP(path.dirname(p), opts, function (er, made) {\n                    if (er) cb(er, made);\n                    else mkdirP(p, opts, cb, made);\n                });\n                break;\n\n            // In the case of any other error, just see if there's a dir\n            // there already.  If so, then hooray!  If not, then something\n            // is borked.\n            default:\n                xfs.stat(p, function (er2, stat) {\n                    // if the stat fails, then that's super weird.\n                    // let the original error be the failure reason.\n                    if (er2 || !stat.isDirectory()) cb(er, made)\n                    else cb(null, made);\n                });\n                break;\n        }\n    });\n}\n\nmkdirP.sync = function sync (p, opts, made) {\n    if (!opts || typeof opts !== 'object') {\n        opts = { mode: opts };\n    }\n    \n    var mode = opts.mode;\n    var xfs = opts.fs || fs;\n    \n    if (mode === undefined) {\n        mode = _0777 & (~process.umask());\n    }\n    if (!made) made = null;\n\n    p = path.resolve(p);\n\n    try {\n        xfs.mkdirSync(p, mode);\n        made = made || p;\n    }\n    catch (err0) {\n        switch (err0.code) {\n            case 'ENOENT' :\n                made = sync(path.dirname(p), opts, made);\n                sync(p, opts, made);\n                break;\n\n            // In the case of any other error, just see if there's a dir\n            // there already.  If so, then hooray!  If not, then something\n            // is borked.\n            default:\n                var stat;\n                try {\n                    stat = xfs.statSync(p);\n                }\n                catch (err1) {\n                    throw err0;\n                }\n                if (!stat.isDirectory()) throw err0;\n                break;\n        }\n    }\n\n    return made;\n};\n","const mkdirp = require('mkdirp');\n\nmodule.exports = function writeCoverage(coverage, file) {\n  mkdirp.sync(path.dirname(file), (err) => {\n    if (err) throw err;\n  });\n\n  const contents = JSON.stringify(coverage || {});\n  if (contents !== '{}') {\n    fs.writeFileSync(file, contents, err => {\n      if(err) throw err;\n    });\n  }\n};","const path = require('path');\nconst Mocha = require('mocha');\n\nconst exec = require('../exec');\nconst server = require('./server');\nconst deepMerge = require('../deepmerge');\nconst testGlobals = require('./testglobals');\nconst loadDir = require('../loaddir');\nconst writeCoverage = require('./writecoverage');\n\nfunction loadTests(dir, mocha, regex, filters) {\n  loadDir({\n    dir: dir,\n    onFile: (filePath) => {\n      if (filters.map(bf => filePath.indexOf(bf) >= 0).indexOf(true) >= 0) {\n        if (filePath.match(regex)) mocha.addFile(filePath);\n      }\n    }\n  });\n}\n\nmodule.exports = async function({\n  root = path.resolve('./'),\n  serverOnly = false,\n  runUnitTests = true,\n  runBrowserTests = true,\n  coverage = false,\n  setGlobals = true,\n  testFileRegex = /\\.test\\.js$/,\n  filters = [''],\n  folders = {},\n  preCommand = [],\n  port = 8888,\n  securePort = false,\n  useJunitReporter = false,\n  junitXmlFile = path.join(root, `./test-results/${path.basename(root)}/results.xml`),\n  inspect = false\n} = {}) {\n  if (inspect) require('inspector').open(undefined, undefined, true);\n\n  deepMerge(folders, {\n    unitTest: path.join(root, './test/unit'),\n    browserTest: path.join(root, './test/browser'),\n    public: path.join(root, './test/public'),\n    static: []\n  }, true);\n\n  if (Array.isArray(preCommand)) {\n    for (let i = 0; i < preCommand.length; i++) {\n      await exec(preCommand[i]).catch(global.console.error);\n    }\n  } else {\n    await exec(preCommand).catch(global.console.error);\n  }\n\n  const servers = await server(folders.public, {\n    extraStaticFolders: folders.static,\n    setGlobals,\n    coverage,\n    port,\n    securePort\n  });\n\n  if (serverOnly) return;\n  if (setGlobals) testGlobals();\n\n  if (coverage) {\n    const { createInstrumenter } = require('istanbul-lib-instrument');\n    const instrumenter = createInstrumenter();\n    const { hookRequire } = require('istanbul-lib-hook');\n    hookRequire((filePath) => filePath.match(/\\/src/), (code, { filename }) => instrumenter.instrumentSync(code, filename));\n  }\n\n  const mochaOptions = {\n    timeout: 10000\n  };\n  if (useJunitReporter) {\n    mochaOptions.reporter = 'mocha-junit-reporter';\n    mochaOptions.reporterOptions = {\n      mochaFile: junitXmlFile\n    };\n  }\n  const mocha = new Mocha(mochaOptions);\n\n  if (runBrowserTests || !runUnitTests) {\n    servers.listen();\n    loadTests(folders.browserTest, mocha, testFileRegex, filters);\n  }\n\n  if (runUnitTests || !runBrowserTests) {\n    loadTests(folders.unitTest, mocha, testFileRegex, filters);\n  }\n\n  mocha.run(async (failures) => {\n    servers.close();\n\n    if (failures) {\n      process.stdout.write(`---------- ${failures} FAILURES. ----------\\n`);\n      process.exitCode = 1;  // exit with non-zero status if there were failures\n    }\n\n    // close browser\n    if (global.browser) await browser.close();\n\n    // Get and write code coverage\n    if (coverage) {\n      writeCoverage(global.__coverage__, path.join(root, './.nyc_output', `./${Date.now()}-unit-coverage.json`));\n    }\n\n    process.exit(process.exitCode);\n  });\n};\n","module.exports = {\n  eslintrc: require('./eslintrc'),\n  loadDir: require('./loaddir'),\n  deepMerge: require('./deepmerge'),\n  getRollupConfig: require('./getrollupconfig'),\n  generateChangelog: require('./generatechangelog'),\n  exec: require('./exec'),\n  checkTag: require('./checktag'),\n  releaseTag: require('./releasetag'),\n  gitAddCommitPush: require('./gitaddcommitpush'),\n  runTests: require('./test/run')\n};\n"],"names":["fs","path","require$$0","resolve","commonjs","babel","cleanup","deepMerge","require","exec","checkTag","require$$1","loadDir","global","require$$2","require$$3","testGlobals","mocha","Mocha","writeCoverage","require$$4","require$$5","require$$6","require$$7","require$$8","require$$9"],"mappings":"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"}