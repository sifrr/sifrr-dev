{"version":3,"file":"sifrr.dev.module.js","sources":["../src/eslintrc.js","../src/loaddir.js","../src/deepmerge.js","../src/getrollupconfig.js","../src/sifrr.dev.js"],"sourcesContent":["module.exports = {\n  env: {\n    browser: true,\n    node: true,\n    es6: true,\n    mocha: true\n  },\n  // for tests\n  globals: {\n    ENV: true,\n    fs: false,\n    path: false,\n    chai: false,\n    sinon: false,\n    assert: false,\n    expect: false,\n    should: false,\n    window: false,\n    delay: false,\n    puppeteer: false,\n    server: false,\n    port: false,\n    PATH: false,\n    page: false,\n    browser: false,\n    Sifrr: false,\n    SifrrStorage: false\n  },\n  extends: 'eslint:recommended',\n  parserOptions: {\n    sourceType: 'module',\n    ecmaVersion: 2017,\n    esversion: 2017\n  },\n  rules: {\n    indent: [\n      'error',\n      2\n    ],\n    'linebreak-style': [\n      'error',\n      'unix'\n    ],\n    quotes: [\n      'error',\n      'single',\n      {\n        avoidEscape: true,\n        allowTemplateLiterals: true\n      }\n    ],\n    semi: [\n      'warn',\n      'always'\n    ],\n    'quote-props': [\n      'error',\n      'as-needed'\n    ],\n    'no-var': [\n      'error'\n    ],\n    'max-lines': [\n      'error',\n      220 // Change to 200 after refactoring API.Model\n    ],\n    'mocha/no-exclusive-tests': 'error'\n  },\n  plugins: [\n    'html',\n    'mocha'\n  ],\n  settings: {\n    'html/indent': '+2'\n  }\n};\n","const fs = require('fs'),\n  path = require('path');\n\nfunction loadDir(dir, onFile, deep = 100) {\n  fs.readdirSync(dir).forEach(file => {\n    const filePath = path.join(dir, file);\n    fs.statSync(filePath).isDirectory()\n      ? (deep > 0 ? loadDir(filePath, onFile, deep - 1) : () => {})\n      : onFile(filePath);\n  });\n}\n\nmodule.exports = loadDir;\n","function type(value) {\n  if (value === null) return 'null';\n  if (typeof value === 'object') {\n    if (Array.isArray(value)) return 'array';\n  }\n  return typeof value;\n}\n\nfunction deepMerge(target, merger, mergeArray = false) {\n  switch (type(target)) {\n  case 'array':\n    return mergeArray ? [...target, ...merger] : [...merger];\n  case 'object':\n    Object.keys(merger).forEach(k => {\n      target[k] = deepMerge(target[k], merger[k]);\n    });\n    return target;\n  default:\n    return typeof merger === 'undefined' ? target : merger;\n  }\n}\n\nmodule.exports = deepMerge;\n","const path = require('path');\nconst babel = require('rollup-plugin-babel');\nconst terser = require('rollup-plugin-terser').terser;\nconst resolve = require('rollup-plugin-node-resolve');\nconst commonjs = require('rollup-plugin-commonjs');\nconst cleanup = require('rollup-plugin-cleanup');\n\nconst deepMerge = require('./deepmerge');\n\nfunction moduleConfig({\n  name,\n  inputFile,\n  outputFolder,\n  minify = false,\n  type = 'cjs',\n  outputFileName\n}, extraConfig) {\n  const filename = path.basename(inputFile).slice(0, path.basename(inputFile).lastIndexOf('.')).toLowerCase();\n  const format = type === 'cjs' ? 'cjs' : (type === 'browser' ? 'umd' : 'es');\n  const ret = {\n    input: inputFile,\n    output: {\n      file: path.join(outputFolder, `./${(outputFileName || filename) + (type === 'module' ? '.module' : '') + (minify ? '.min' : '')}.js`),\n      format,\n      name: name,\n      sourcemap: !minify,\n      preferConst: true,\n      exports: 'named'\n    },\n    plugins: [\n      resolve({\n        browser: type === 'browser',\n        mainFields: ['module', 'main']\n      }),\n      commonjs()\n    ]\n  };\n\n  if (type !== 'module') {\n    ret.plugins.push(babel({\n      exclude: 'node_modules/**',\n      rootMode: 'upward'\n    }));\n  }\n\n  ret.plugins.push(cleanup());\n\n  if (minify) {\n    ret.plugins.push(terser({\n      output: {\n        comments: 'all'\n      }\n    }));\n  }\n\n  return deepMerge(ret, extraConfig, true);\n}\n\nmodule.exports = moduleConfig;\n","module.exports = {\n  eslintrc: require('./eslintrc'),\n  loadDir: require('./loaddir'),\n  deepMerge: require('./deepmerge'),\n  getRollupConfig: require('./getrollupconfig')\n};\n"],"names":["require$$0","resolve","commonjs","babel","cleanup","deepMerge","require$$1","require$$2","require$$3"],"mappings":"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"}