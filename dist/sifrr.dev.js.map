{"version":3,"file":"sifrr.dev.js","sources":["../src/eslintrc.js","../src/loaddir.js","../src/deepmerge.js","../src/getrollupconfig.js","../src/sifrr.dev.js"],"sourcesContent":["module.exports = {\n  env: {\n    browser: true,\n    node: true,\n    es6: true,\n    mocha: true\n  },\n  // for tests\n  globals: {\n    ENV: true,\n    fs: false,\n    path: false,\n    chai: false,\n    sinon: false,\n    assert: false,\n    expect: false,\n    should: false,\n    window: false,\n    delay: false,\n    puppeteer: false,\n    server: false,\n    port: false,\n    PATH: false,\n    page: false,\n    browser: false,\n    Sifrr: false,\n    SifrrStorage: false\n  },\n  extends: 'eslint:recommended',\n  parserOptions: {\n    sourceType: 'module',\n    ecmaVersion: 2017,\n    esversion: 2017\n  },\n  rules: {\n    indent: [\n      'error',\n      2\n    ],\n    'linebreak-style': [\n      'error',\n      'unix'\n    ],\n    quotes: [\n      'error',\n      'single',\n      {\n        avoidEscape: true,\n        allowTemplateLiterals: true\n      }\n    ],\n    semi: [\n      'warn',\n      'always'\n    ],\n    'quote-props': [\n      'error',\n      'as-needed'\n    ],\n    'no-var': [\n      'error'\n    ],\n    'max-lines': [\n      'error',\n      220 // Change to 200 after refactoring API.Model\n    ],\n    'mocha/no-exclusive-tests': 'error'\n  },\n  plugins: [\n    'html',\n    'mocha'\n  ],\n  settings: {\n    'html/indent': '+2'\n  }\n};\n","const fs = require('fs'),\n  path = require('path');\n\nfunction loadDir(dir, onFile, deep = 100) {\n  fs.readdirSync(dir).forEach(file => {\n    const filePath = path.join(dir, file);\n    fs.statSync(filePath).isDirectory()\n      ? (deep > 0 ? loadDir(filePath, onFile, deep - 1) : () => {})\n      : onFile(filePath);\n  });\n}\n\nmodule.exports = loadDir;\n","function type(value) {\n  if (value === null) return 'null';\n  if (typeof value === 'object') {\n    if (Array.isArray(value)) return 'array';\n  }\n  return typeof value;\n}\n\nfunction deepMerge(target, merger) {\n  switch (type(target)) {\n  case 'array':\n    return [...target, ...merger];\n  case 'object':\n    Object.keys(merger).forEach(k => {\n      target[k] = deepMerge(target[k], merger[k]);\n    });\n    return target;\n  default:\n    return typeof merger === 'undefined' ? target : merger;\n  }\n}\n\nmodule.exports = deepMerge;\n","const path = require('path');\nconst babel = require('rollup-plugin-babel');\nconst terser = require('rollup-plugin-terser').terser;\nconst resolve = require('rollup-plugin-node-resolve');\nconst commonjs = require('rollup-plugin-commonjs');\nconst cleanup = require('rollup-plugin-cleanup');\n\nconst deepMerge = require('./deepmerge');\n\nfunction moduleConfig({\n  name,\n  inputFile,\n  outputFolder,\n  min = false,\n  type = 'cjs',\n  outputFileName\n}, extraConfig) {\n  const filename = path.basename(inputFile).slice(0, path.basename(inputFile).lastIndexOf('.')).toLowerCase();\n  const format = type === 'cjs' ? 'cjs' : (type === 'browser' ? 'umd' : 'es');\n  const ret = {\n    input: inputFile,\n    output: {\n      file: path.join(outputFolder, `./${(outputFileName || filename) + (type === 'module' ? '.module' : '') + (min ? '.min' : '')}.js`),\n      format,\n      name: name,\n      sourcemap: !min,\n      preferConst: true,\n      exports: 'named'\n    },\n    plugins: [\n      resolve({\n        browser: type === 'browser',\n        mainFields: ['module', 'main']\n      }),\n      commonjs()\n    ]\n  };\n\n  if (type !== 'module') {\n    ret.plugins.push(babel({\n      exclude: 'node_modules/**',\n      rootMode: 'upward'\n    }));\n  }\n\n  ret.plugins.push(cleanup());\n\n  if (min) {\n    ret.plugins.push(terser({\n      output: {\n        comments: 'all'\n      }\n    }));\n  }\n\n  return deepMerge(ret, extraConfig);\n}\n\nmodule.exports = moduleConfig;\n","module.exports = {\n  eslintrc: require('./eslintrc'),\n  loadDir: require('./loaddir'),\n  deepMerge: require('./deepmerge'),\n  getRollupConfig: require('./getrollupconfig')\n};\n"],"names":["env","browser","node","es6","mocha","globals","ENV","fs","path","chai","sinon","assert","expect","should","window","delay","puppeteer","server","port","PATH","page","Sifrr","SifrrStorage","extends","parserOptions","sourceType","ecmaVersion","esversion","rules","indent","quotes","avoidEscape","allowTemplateLiterals","semi","plugins","settings","loadDir","dir","onFile","deep","readdirSync","forEach","file","filePath","join","statSync","isDirectory","type","value","Array","isArray","deepMerge","target","merger","Object","keys","k","terser","require$$0","moduleConfig","name","inputFile","outputFolder","min","outputFileName","extraConfig","filename","basename","slice","lastIndexOf","toLowerCase","format","ret","input","output","sourcemap","preferConst","exports","resolve","mainFields","commonjs","push","babel","exclude","rootMode","cleanup","comments","eslintrc","require$$1","require$$2","getRollupConfig","require$$3"],"mappings":"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"}